<!DOCTYPE html>
<html>

<head>
  <title>Pirogov CS/Dev</title>
  <!-- Bootstrap CSS -->
  
  <!-- Custom CSS -->
  
    <link rel="stylesheet" href="/style/general.css">
    <link rel="stylesheet" href="/style/articles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" href="/public/img/logo.jpg">
</head>

<body>
  <header>
    <div id="header-container">
        <nav>
            <a href="/articles/">Посты</a>
            <a href="/logs/">Логи</a>
        </nav>
    </div>
</header>

  <body>
        <main id="content-container">
            <article>
                <h1>
                    01.10.2023 - 15.10.2023 <br>
                    K8s. Типы ресурсов. Отказоустойчивость.</h1>
                <p>
                    За данный период в основном практиковался с k8s: создавал поды, деплои, сервисы.
                </p>
                <h2>Типы ресурсов</h2>
                <p>
                    k8s управляет так объектами различных типов, так называемые ресурсы:
                    <ul>
                        <li>
                            POD - логическая единица в k8sб управляющая контейнерами. Запустить pod можно командой run
                        </li>
                        <li>
                            Deployment - комплекс, состоящий из нескольких ресурсов, наиболее часто используемый ресурс. 
                            При создании deployment'a создается под, набор реплик.
                        </li>
                        <li>
                            Сервисы - объект, предоставляющий endpoint до подов. Есть следующие виды сервисов:
                            <ul>
                                <li>
                                    ClusterIP
                                </li>
                                <li>
                                    NodePort
                                </li>
                                <li>
                                    LoadBalancer
                                </li>
                            </ul>
                            Если LoadBalancer для меня понятен, то пока ClusterIP и NodePort, не совсем понятны.
                        </li>
                    </ul>
                </p>
                <h2>Практика</h2>
                <p>
                    Подготовил материал для поста об отказоустойчивости с помощью k8s. Создал маленькое приложение на Go, создал 
                    image и запушил на Dockerhub. Далее, на k8s создал deployment, service,  запустил несколько экземпляров приложения.
                    Код приложения иногда завершался аварийно, дабы имитировать "падение" сервиса. Наблюдал как ведет себя k8s, как поднимаются 
                    реплики. Из важных вещей:
                    <ul>
                        <li>
                            если приложение имеет endpoint, при обращении к которому приложение всегда завершается аварийно, то 
                            при обращении к даннолму endpoint'y приложение завершится аварийно, а k8s будет направлять запрос следующему 
                            экземпляру, который в свою очередь может также "упасть", и круг запрос будет "крутится" так долго. Возможно, 
                            в LoadBalancer имеется некоторая настройка, которая решает данную проблему.
                        </li>
                        <li>
                            перезапуск реплик приложение происходит не моментально
                        </li>
                    </ul>
                </p>
                <h2>Мониторинг и логгирование</h2>
                <p>
                    Про логгирование не могу сказать что-либо интересное. Из блогов экспертов k8s, такие как <a href="https://www.youtube.com/@BretFisher">Bret Fisher</a>
                    и <a href="https://www.youtube.com/c/academind">Academind</a>, узнал, что в основном используют third-party инструменты для мониторинга 
                    и логгирования.
                </p>
            </article>
        </main>
      </div>

    </div>
  </body>

</html>