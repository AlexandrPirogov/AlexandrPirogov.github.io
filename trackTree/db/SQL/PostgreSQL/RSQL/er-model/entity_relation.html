<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/newstyle.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="mainText">
        <h1>Модель данных "сущность-связь"</h1>
        <div>
        Процесс проектирования базы данных начинается с вопроса "какого рода информация должна быть представлены в ней?".
        Структура или схема (schema) базы данных определяется средствами, пригодными для описания проектов.
        </div>
         <div>
        Рассмотрим графическую по своей природе ER-модель (entity-realtionship), ставшей наиболее популярной -- прямоугольники
        отображают элемены данных а линии указывают на связи между ними.
        </div>
        <b>Добавить рисунок отражающий процесс моделирования и реализации бд</b>
        <div>

        </div>

        <div class="part">
            <h2>Элементы ER-модели</h2>

            В <i>ER</i>-модели структура данных отображается графически, в виде диаграммы сущностей и связий (er digram), состоящей из элементов основных трёх типов:
            <ol>
                <li>a) множеств сущностей</li>
                <li>б) атрибутов</li>
                <li>в) связей</li>
            </ol>
        </div>

        <div class="part">
            <div>
                <h4>Множества сущностей</h4>
                Сущность (<i>entity</i>) -- абстрактный объект определённого вида. 
                Набор однородных сущностей образует <i>множество сущностей</i>.
                ER-модель имеет дело со статическими объектами и отражает структуру данных.
            </div>
            <div>
                <h4>Атрибуты</h4>
                Каждую сущность обладает набором атрибутов, являющиеся свойствами сущностей множества.
                В ER-модели атрибуты представляют собой <b>атомарные значения</b> (строки, целые или вещественные числа и т.п).
            </div>
            <div>
                <h4>Cвязи</h4>
                Связи (relationships) -- соединения между двумя или большим числом множеств сущностей, отражающие связь между ними.
            </div>

          
        </div>

      

        <div class="part">
            <h2>Диаграммы сущностей и связей</h4>

            <div>
                Диаграмма сущностей и связей (ER diagram) -- это графическое представленией множеств сущностей, их атрибутов и связей. 
                Элементы названных видов описываются вершинами графа и для задания принадлжености элемента к определённому виду используется следующие 
                обозначения

                <ol>
                    <li><i>Прямоугольник</i> -- для множеств сущностей</li>
                    <li><i>овал</i> -- для атрибутов</li>
                    <li><i>ромб</i> -- для связей</li>
                </ol>

                Рёбра графа соединяют множества сущностей с атрибутами и служат для представления связей между множествами сущностей.
            </div>

            <div class="example">
                На данном рисунке можно увидеть ER-диаграмму, состоящая из:
                <ol> 
                    <li>Множества сущностей </li>
                    <p><i>"Автомобиль"</i> с атрибутами <i>"Название"</i>,<i>"Цвет"</i>,<i>"Кол-во мест"</i>,<i>"Двигатель"</i>, <i>"Владелец"</i>,</p> 
                    <p><i>"Двигатель"</i> с атрибутами <i>"Мощность"</i>,<i>"Стоимость"</i>,</p>
                    <p><i>"Владелец"</i> с атрибутами <i>"Имя"</i>,<i>"Дата рождения"</i>,</p>
                    <li><p>А также связей</p></li>
                    <p><i>"ДвигательВАвтомобиле"</i> и <i>"ВладелецАвтомобиля"</i></p>
                </ol>
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/simpleER.png" alt="Простая ER-диаграмма">
                </div>
            </div>

        </div>

        <div class="part">
            <h2>Экземпляры ER-диаграммы</h2>

            <div>
                ER-диаграммы представлют собой инструмент описания схем баз данных. Базу данных, соответствующую определённой ER-диаграмме и
                содержащую определённые набор данных принято называть <i>экземпляром</i> базы данных (database instance).
                Каждому множеству сущностей в экземпляре базы данных отвечает некоторый частный конечный набор сущностей, 
                а каждая из таких сущностей обладает определёнными значениями каждого из атрибутов.
            </div>
            <div>
                Экземпляр базы данных включает также определённые экземпляры <b>связей</b>, описываемых диаграммой.
                Связи R, которая соединяет n множеств сущностей \[{E_1, E_2,....,E_n}.\], соотвествует экземпляр, состоящий из конечного множества списков
                \[{(e_1, e_2,....,e_n)}.\], где каждый элемент \[e_i\] выбран из числа сущностей, присутствующих в текущем экземпляре множества сущностей \[E_i\].
                Говорим, что элементы каждого из таких списков, охватывающих n сущностей, "соеденины" посредством связи R.
                
                Указанное множество списков называют <i>множеством данных связи</i> (relationship set) для текущего экземпляра связи R.
                Полезно представлять множество данных связи в виде таблицы, где столбцы озаглавлены наименованиями множеств сущностей, охватываемых связью,
                а каждому списку соединённых сущностей отводится одна строка таблицы.

            </div>

            <div class="example">
                Экземпляр связи "ВладелецАвтомобиля" можно описать таблицей пар данных, которая будет иметь следующий вид:
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/ER_example.png" alt="Простая ER-диаграмма">
                </div>
            </div>

        </div>


        <div class="part">
            <h2>Виды связей и их составляющие</h2>
            <h3>Бинарные связи</h3>
            <div>
                <i>Бинарная связь (binary relationship)</i> соединяет любой элемент одного множества сущностей с другим элементов другого множества сущностей.
                Разделяют следующие виды бинарный связей:
                <ul>
                    <li>Если каждый элемент множества Е посредством связи R может быть соединён более чем с одним элементом F
                        и имеет более чем одну связь, то R представляет связь "<i>Многие к многим</i>". 
                    Обозначается линией без стрелок</li>
                    <li>Если каждый элемент множества Е посредством связи R может быть соединён не более чем с одним элементом F
                        и имеет более чем одну связь, то R представляет связь "<i>Многие к одному</i>".
                    Обозначается линией со стрелкой в сторону сущности, наличие которой должно быть не более чем одной.</li>
                    <li>Если элемент множества Е посредством связи R может быть соединён более чем с одним элементом F
                        и имеет не более чем одну связь то R представляет связь "<i>Один ко многим</i>"</li>
                    <li>Если один элемент множества Е посредством связи R может быть соединён не более чем с одним элементом F,
                        и имеет не более чем одну связь, то R представляет связь "<i>Один к одному</i>".
                    Обозначается линией со стрелками на каждом конце линии.</li>
                </ul> 

            </div>

            <div class="example">
                Стрелки идущая от связи "ВладелецАвтомобиля" к владельцу указывает на то, что у автомобиля может быть только один владелец,
                но у владельца могут быть более одного автомобиля.
                <p>Аналогично, двигатель может быть в различных автомобилях, но у каждого автомобиля единственный двигатель</p>
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/oneToMany.png" alt="Простая ER-диаграмма">
                </div>
                <p>Допустим, что по закону каждый владелец может иметь только один автомобиль. Связь "ВладелецАвтомобиля" представляла бы "Один к однуму"
                    и обозначалась линией со стрелками в каждом направлении.
                </p>
            </div>

            <h3>Тернарные связи</h3>
            <div>
                ER-модель может отображать связи, охватывающие более двух множеств сущностей. Многосторонние связи
                (multiway relationship) отображаются на ER-диаграмме линиями, соединяющими ромб связи с каждым из соответствующих прямоугольников
                множеств связи.
            </div>

            <div class="example">
                Изменим нашу диаграмму, а именно связь "ДвигательВАвтомобиле" на "КомплектующиеАвтомобиля". Добавим множество сущностей "Аккумуляторы".
                Теперь "КомплектующиеАвтомобиля" содержит автомобиль и его комплектующие.
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/ternarR.png" alt="Простая ER-диаграмма">
                </div>
            </div>

            <h3>Связи и роли</h3>
            <div>
                Вероятна ситуация, когда одно и тоже множество сущностей упоминается в контексте единственной связи многогратно.
                В ER-диаграмме задаётся столько линий, соединяющих связь с множеством сущностей, сколько потребуется.
                Каждую линию принято обозначать текстовыми метками, описывающие роль линий, так как каждая линия отражает свою роль.
            </div>

            <div class="example">
                На ниже приведённой диаграмме изображена связь "ВладелецАвтомобиля" соединяющее множество сущностей "Владелец" само с собой.
                Каждый конкретный экземпляр связи соединяет два владельца
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/fiewArrows.png" alt="Простая ER-диаграмма">
                </div>
            </div>

            <h3>Связи и атрибуты</h3>
            <div>
                На практике бывает необходимо связать некоторый атрибут со связью, а не с некоторым множеством сущностей, охватываемые этой связью.

            </div>       
            
            <div class="example">
                Добавим название предприятия, как атрибут к связи "КомплектующиеАвтомобиля", которое занимается сборкой комплектующих. 
                Можно добавить атрибут "Название" к связи "КомплектующиеАвтомобиля", означающeе название предприятия.            
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/atToR.png" alt="Простая ER-диаграмма">
                </div>
                Но злоупотреблять подобным не стоит; лучше ввести в диаграмму новое множество сущностей с тем же атрибутом, соединить это множество
                со связью и удалить атрибут связи.
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/betterToR.png" alt="Простая ER-диаграмма">
                </div>
            </div>

        </div>
       
        <div class="part">
            <h2>Преобразование тернарных связей в бинарные</h2>
            <div>
                Существуют некоторые модели представления данных, такие как ODL (язык определения объектов), которые ограничивают число "сторон", охватываемые
                связью до двух, то есть предполагают использование только бинарных связей. Посколько ER-модели не обладают подобными ограничениями, полезно знать,
                что любую тернарную связь можно преобразовать в набор бинарных связей "многие к одному". С этой целью вводится новое множество сущностей, элементы
                которого являются кортежами множества данных для рассматриваемой тернарной связи и называется <i>соединяющим множеством сущностей</i>.
                Далее, вводятся связи, связывающие соединяющее множество сущностей с каждым из множеств сущностей, элементы которых служат компонентами кортежей множества данных
                для исходной тернарной связи. 
                Если некоторое множество сущностей в контексте связи обладает несколькими ролями, каждая роль преобразуется отдельно.           
            </div>

            <div class="example">
                
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/TernarToBinar.png" alt="Простая ER-диаграмма">
                </div>
            </div>

        </div>

        <div class="part">
            <h2>Подклассы в ER-модели</h2>
            <div>
                <p>
                    Нередки ситуации, когда множество сущностей содержит определённые сущности, обладающие специальными свойствами, не присущими остальным
                    членам множества. В подобных случаях создаются <i>подкласыы</i> - множества сущностей, каждое из которых обладает специальным набором атрибутов.
                    Для соединения базового класса и подкласса используются связи, называемые <i>isa</i>. Каждая связь <i>isa</i> обозначается треугольником 
                    и относится к типу "один к одному".
                </p>
                 <p>
                    Если некоторая сущность <i>е</i> обладает компонентом <i>с</i> из множестве сущностей <i>Е</i> и родительским по отношению к
                    <i>Е</i> является множество <i>А</i>, то <i>е</i> обладает также некоторым компонентом <i>d</i> из <i>F</i>. Сущнорсть <i>e</i>
                    имеет те же атрибуты, которыми обладает любой из её компонентов, и участвует в тех же связях, к которым имеет отношение любой из этих компонентов.

                 </p>
                  
            </div>

            <div class="example">
                Сущность "Тягач" обладает обладает двумя компонентами, один из которых относится к множеству сущностей "Автомобиль", а другой -- к "ГрузовойАвтомобиль"
                . Поэтому она получит компоненты и от множества сущностей "Автомобиль", и от множества сущностей "ГрузовойАвтомобиль".
                <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/subClasses.png" alt="Простая ER-диаграмма">
                </div>
            </div>

        </div>
    </div>
</body>