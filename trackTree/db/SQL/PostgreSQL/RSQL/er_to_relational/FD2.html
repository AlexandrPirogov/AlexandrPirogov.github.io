<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/newstyle.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="mainText">
       

        <div class="part">
            <h2>Правила использования функциональных зависимостей</h2>

            Поговорим, как следует воспринимать функциональные зависимости -- например, когда нам говорят, что некоторый набор FD удовлетворяет определенному отношению.

            Функциональные зависимости нередко могут быть представлены несколькими различными способами при условии, что набор существующих экзмепляров отношения остается 
            неизменным. Говорят, что:

            <ul>
                <li>
                    Два множества FD S и T являются <i>эквивалентными</i>, если множество экземпляров отношения, удовлетворяющих S, в точности совпадает с множеством
                    экземпляров отношения, удовлетворяющих T;
                </li>
                <li>
                    Множество FD S следует из множества FD T, если каждый экземпляр отношения, удовлетворяющий всем FD множества Т, также удовлетворяет
                    всем FD множества S.
                </li>

                Заметим, что два множества FD S и T являются эквивалентными, если и только если S следует из Е и Т следует из S.
            </ul>
            

            Ниже будут приведены несколько полезных правил использования FD. Правила дают возможность, например, заменять одно множество FD другим, эквивалентным,
            множеством или добавлять в множество другие FD,которые следуют из существующего FD. 

        </div>

        <div class="part">
            <h2>Правила разделения/объеденения</h2>

            Мы имеем право разделить множество атрибутов, перечисленных в правой части сокращенного выражения FD, на элементы и поместить каждых из них в 
            правую часть новой отдельной FD. И наоборот. 
            Изложим формально:

            <ul>
                <li>
                    Преобразование FD вида A1 A2 ... An --> B1 B2 ... Bm в множество FD, таких, что A1 A2 ... An --> Bi, где i = 1, 2, ..., m, называют
                    <i>правилом разделения</i>.
                </li>
                <li>
                    Преобразование множества FD вида A1 A2 .. An --> Bi, где i = 1,2,...,m в FD A1 A2 ... An --> B1 B2 ... Bm называют 
                    <i>правилом объеденения</i>.
                </li>
            </ul>
            
            <div class="example">
                В качестве иллюстрации приведём множество FD, рассмотренное <a href="./FD.html">здесь</a>:
                <br><br> Название, Турнир, Игрок --> Стадион
                <br> Название, Турнир, Игрок --> Цвет
                <br> Название, Турнир, Игрок --> Страна
                <br> Название, Турнир, Игрок --> Трофеи
                <br> Название, Турнир, Игрок --> Турнир

                На основе данного правила мы вправе записать FD следующим образом:
                <br>
                <br>Название, Турнир, Игрок --> Стадион, Трофеи, Цвет, Старна, Турнир

            </div>
        </div>

        <div class="part">
            <h2>Тривиальные функциональные зависимости</h2>

            Говорят, что FD A1 A2...An --> B является тривиальной, если атрибут B совпадает с любым из атрибутов Ai, i = 1, 2, .., n.
            Тривиальная FD справедлива для любого отношения, поскольку она гласит, что "два кортежа, совпадающие во всех атрибутах A1, A2, ... An, совпадают 
            также в одном из них". Таким образом, тривиальная FD может быть принята к рассмотрению без обоснования ее истинности применительно к другим FD.

            Допуская существование тривиальных FD, можно признать возможность применения и таких FD, в которых некоторое подмножество атрибутов правой части
            присутствует и в левой части. Принято утверждать, что FD вида A1 A2 ... An --> B1 B2 ... Bm отностися к категории:

            <ul>
                <li>
                    тривиальных, если множества {B1, B2, ... Bm} является подмножеством множества {A1, A2, ...An}
                </li>
                <li>
                    нетривиальных, если по меньшей мере один из атрибутов Bi не являетсяы элоементом множества {A1, A2, ... An}
                </li>
                <li>
                    полностью нетривиальных, если не оди н из атрибутов Bi не является элементом множества {A1, A2, ... An}
                </li>
            </ul>

            Мы всегда можем изъять из правой части любой FD те атрибуты, которые присутствуют в левой её части. Формально:

            <ul>
                <li>
                    FD вида A1 A2 ... An --> B1 B2 ... Bm равносильна A1 A2 ... An --> C1 C2 ... Ck, где {C1, C2, .. Ck} представляет собой подмножество множества
                    {B1, B2, ..., Bm}, такое, что ни один из его элементов не является членом множества {A1, A2, ... , An}
                </li>

                Это правило называется <i>правилом тривиальной зависимости</i>
            </ul>
            
            <div class="example">
                Функциональная зависимость: <br>
                <br> Название, Турнир, Игрок --> Турнир -- Тривиальная
                <br> Название, Турнир, Игрок --> Страна, Название -- Нетривиальная
                <br> Название, Турнир, Игрок --> Лига, Трофеи -- Полностью нетривиальная

                <br> Пример тривиальной зависимости: <br>
                <br> Название, Турнир, Игрок --> Страна, Название <br>
                можно привести к виду: <br>
                Название, Турнир, Игрок --> Страна <br>
                  <!--  <div class="exampleImage">
                   Здесь будет рисунок примера
                </div>-->
            </div>
        </div>

        <div class="part">
            <h2>Замыкание множества атрибутов</h2>

            Прежде чем перейти в изложению остальный правил обращение с функциональными зависимостями, рассмотрим основной принцип, лежащий в основе всех этих правил.
            <p>
                Предположим, что {A1, A2, ... An} -- множество атрибутов, а S -- множество функциональных зависимостей. <i>Замыканием множества</i> {A1, A2, ..., An } при условии выполнения
                FD множества S называют множества B атрибутов, таке что для каждого отношения которому удовлетворяют все FD множества S, справедлива и FD A1 A2 ... An --> B.
            <br>Другими словами, FD A1 A2 ... An --> B следует из множества S. Замыкание множества {A1, A2, ..., An} обозначают как  {A1, A2, ..., An}+.                
            </p>

            <p>
                Алгоритм вычисление замыкания множества {A1, A2, ..., An} атрибутов по отношение к некоторому множеству FD:

                <ol>
                    <li>
                        Пусть переменная Х представляет множество атрибутов, подлежащее расширению до момента достижения замыкания. Х Инициализируется значением {A1, A2, ..., An}.
                    </li>
                    <li>
                        Выполняется поиск некоторой FD  B1 B2 ... Bm --> C, такой, что все атрибуты B1, B2,..., Bm 
                        принадлежит множеству Х, а С -- нет. Если указанная FD существует, С добавляется в множество Х.
                    </li>
                    <li>
                        Шаг 2 повторяется до тех пор, пока существуют соответствующие FD, атрибуты которых подлежат включению в множество Х. Поскольку Х допускает только расширение и количество
                        атрибутов, охваптываемых любой реляционной схемой, конечно, на определенной итерации процесса множество атрибутов, которые могут быть добавлены в Х, будет исчерпано.
                    </li>
                    <li>
                        После завершения процедуры расширения множество Х содержит искомое значение замыкания, {A1, A2, ..., An}+.
                    </li>
                </ol>
            </p>

            <div class="example">
                <p>
                    Рассмотрим отношение с атрибутами A, B, C, D, E, F. Предположим, что отношению удовлетворяют следующие FD: 
                    <ol>
                        <li>A B --> C</li>
                        <li>B C --> A</li>
                        <li>D --> E</li>
                        <li>C F --> B</li>
                    </ol>    
                    Что представляет собой замыкание {A, B}, т.е. {A, B}+.
                    
                    <p>
                        <ol>
                            <li>
                                Обозначим {A,B}, как Х. В соответствие с шагом 2, можем найти FD A B --> C, левая часть который имеется в Х, а правая -- нет. Добавляем С в Х.
                                <br> X = {A, B, C}.
                            </li>
                            <li>
                                Находим FD B C --> A D. B и С имеются в Х. Атрибут А имеется в Х, но атрибут D -- нет. Включаем D в Х. Далее приведны шаги без комментариев.
                                <br> X = {A, B, C ,D}.
                            </li>
                            <li>
                                D --> E. X = {A, B, C, D, E}.
                            </li>
                        </ol>

                        Дальнейшее расширение Х невозможно, а FD C F --> B  мы не вправе рассмотривать, т.к F не принадлежит X. 
                        <br><br>
                        Получаем, {A,B}+ = {A, B, C, D, E}.
                    </p>
                </p>
                  <!--<div class="exampleImage">
                   Здесь будет рисунок примера
                </div>-->
            </div>

            <p>
                Теперь мы можем проверить, следует ли любая FD A1 A2 ... An --> B из множества FD S. Вначале получим замыкание {A1, A2, ..., An}+, используя множества FD s. 
                Если B является членом {A1, A2, ..., An}+, FD A1 A2 ... An --> B следует из S, а если B не входит в состав {A1, A2, ..., An}+, FD не следует из S. 
                <br><br>
                Иными словами, FD вида A1 A2 ... An --> B1 B2 ... Bm следует из множества FD S, если и только если все атрибуты B1, B2, ..., Bm являются членами замыкания {A1, A2, ..., An}+.
            </p>

            <div class="example">
                На основе вышеприведённого примера, предположим, что необходимо проверить, следует ли из множества этих зависимостей FD A B --> D.
                Действия наши будут следующими:
                <ol>
                    <li>Вычисляем {A,B}+. Оно будет равным {A, B, C, D, E} (ответ получен на основе вышеприведённого примера).</li>
                    <li>Правая часть FD A B --> D является элементом {A,B}+, следовательно данная FD следует из множества заданных FD S.</li>
                </ol>
                  <!--  <div class="exampleImage">
                   Здесь будет рисунок примера
                </div>-->
            </div>

            <div class="example">
                Рассмотрим ещё один пример. Имеем множества атрибутов X = {A,B,C,D,E,F}. Имеем множество FD S:
                <ol>
                    <li>A --> C</li>
                    <li>C --> E F</li>
                    <li>F --> D</li>
                </ol> 

                Нужно проверить, следует ли FD C F --> D из множества S?  
                <ol>
                    <li>Вычисляем {C, F}+. Оно будет равным {C, D, F, E}.</li>
                    <li>Правая часть FD C F --> D является элементом {C, F}+, следовательно данная FD следует из множества заданных FD S.</li>
                </ol>
                  <!--  <div class="exampleImage">
                   Здесь будет рисунок примера
                </div>-->
            </div>
        </div>



        <div class="part">
            <h2>Правило транзитивности</h2>

            <i>Правило транзитивности</i> позволяет соединять FD в логическую цепочку.

            <ul>
                <li>Если для отношения R справедливы FD A1 A2 ... An --> B1 B2 ... Bm и B1 B2 ... Bm --> C1 C2 ... Ck, то справедлива запись 
                    A1 A2 ... An --> C1 C2 ... Ck
                </li>
            </ul>

            Чтобы определить, выполняется ли условие A1 A2 ... An --> C1 C2 ... Ck, необходимо вычислить замыкание {A1, A2, ... An}+ с учетом двух заданных FD.

            FD A1 A2 ... An --> B1 B2 ... Bm позволяет утверждать, что все атрибуты B1, B2 .. Bm, являются членами множества {A1, A2, ... An}+. Значит, принимая 
            во внимание справедливость FD B1 B2 ... Bm --> C1 C2 ... Ck, мы вправе включить в состав {A1, A2, ... An}+ и атрибуты C1, C2, ..., Ck. Посколкьу теперь все
            C1, C2, ..., Ck ппринадлежат множества {A1, A2, ... An}+, мы заключаем, что FD A1 A2 ... An --> C1 C2 ... Ck удовлетворяет любому отношению, которому 
            одновременно удовлетворяют FD A1 A2 ... An --> B1 B2 ... Bm и B1 B2 ... Bm --> C1 C2 ... Ck.
            <div class="example">
                Имеем следующую таблицу "ФутбольныйКлуб", которая была приведена в качестве примера <a href="./FD.html">ранее</a>.
                Допутсим, мы хотим хранить колечество мест на стадионе (предположим, что мест всегда будет различное количество).
                  <div class="exampleImage">
                    <img src="/images/db/SQL/PosgreSQL/4chapter/TransitiveFD.png" alt="">
                </div>
                <br>
                Мы можем указать следующие FD, которые определённо справедливы:
                <ol>
                    <li>Название Цвет Игрок --> Стадион</li>
                    <li>Стадион --> КоличествоМест</li>
                    <li>Название Цвет Игрок --> КоличествоМест</li>
                </ol>  
                <br>
                Правило транзитивности позволяет объединить две названные выше FD и на их основе получить новую FD.
            </div>
        </div>


        <div class="part">
            <h2>Замкнутые множества функциональных зависимостей</h2>

            Иногда существует возможность выбора одного из альтернативных наборов FD, пригодных для представления полного множества FD конкретного отношения. 
            Любое множества FD отношения, из которых допустимо вывести все другие FD, называют <i>базисом</i> отношения. Если ни одно из подмножеств базиса
            не может быть, в свою очередь, использовано для получения полного множества FD отношения, принято говорить, что базис является <i>минимальным</i>.

            <div class="example">
                Рассмотрим отношение R(A,B,C), таоке, что каждый из его атрибутов функционально обуславливает два других атрибута. Таким образом,
                полное множество производных FD для отношения R будет включать 6 FD с одним атрибутом в левой и правой частях:
                <ol>
                    <li>A --> B</li>
                    <li>A --> C</li>
                    <li>B --> A</li>
                    <li>B --> C</li>
                    <li>C --> A</li>
                    <li>C --> A</li>
                </ol>
                <br>В состав множества входят также три нетривиальных FD с двумя атрибутами в левой части:
                <ol>
                    <li>A B --> C</li>
                    <li>A C --> B</li>
                    <li>B C --> A</li>
                </ol>
                <br>
                Помимо того, возмжно использовать сокращенные записи для представления пар FD, такие как A --> B C, либо рассматривать тривиальные FD (A --> A)
                или FD вида A B --> B C, которые не относятся к категории полностью нетривиальных.

                <br>
                Отношение R и его FD обладают несколькими минимальными базисами. Один из них выглядит так:
                <ol>
                    <li>{A --> B, B --> A, B --> C, C --> B}</li>
                    А другой так:
                    <li>{A --> B, B --> C, C --> A}</li>
                </ol>
            </div>
        </div>


        <div class="part">
            <h2>Проецирование функциональных зависимостей</h2>

            При изучении аспектов дизайна реляционных схем нам потребуется получить ответ на следующий вопрос. Предположим, имеется некоторое отношение R с множествами FD
            F и мы "проецируем " R, удаляя некоторые атрибуты его схемы. Пусть S -- отношения, полученное из R путём удаления компонентов, соответствующих всем удаленным 
            атрибутам, во всех кортежах R. Поскольку S является множеством, совпадающие кортежи в нем заменяются одной копией. Какие FD останутся справедливыми для S?

            Ответ состоит в вычислении всех FD, которые:
            
            <ol>
                <li>следуют из F;</li>
                <li>включают атрибуты, принадлежащие только S</li>
            </ol>

            <div class="example">
                Пусть отношение R(A, B, C, D) обладает FD A --> B, B --> C и C --> D. Предположим также, что нам необходимо отбросить атрибут B, перейдя от схемы 
                R(A, B, C, D) к схеме S(A, C, D). Чтобы найти FD, удовлетворяющие S, нам требуется вычислить замыкание для всех возьми подмножеств множества {A, C, D},
                исользуя полное множество FD, включающее и те зависимости, в которые вовлечен атрибут B. Однако имеется возможность применить ряд очевидных упрощений.

                <ul>
                    <li>
                        Замыкания пустого множества и множества всех атрибутов не способны приводить к получению нетривиальных FD.
                    </li>
                    <li>
                        Если известно, что замыкание некотрого множества Х содержит все его атрибуты, построение замыканий для надмножеств Х не приведет 
                        к нахождению новых FD.
                    </li>
                </ul>
                <p>
                    Поэтому, мы имеем право начать с построения замыканий для единичных множеств, а затем при необходимости перейти к рассмотрению множеств с двумя
                    элементами. Для каждого замыкания некотрого множества Х можно добавить FD вида X --> E, где E -- это каждый из атрибутов, который присутствует в Х+ 
                    и в схеме S, но отсутствует в Х.
                </p>
                    Во-первых, {A}+ = {A,B,C,D}. Поэтому FD A --> C и A --> D справедливы для S. Заметьте, что FD A --> B верна в контексте отношения R, но для S -- нет, 
                    так как B не относится к числу атрибутов S.
                <p>
                    Во-вторых, принимания во внимание, что {C}+ = {C, D}, мы можем получить для S допольнительную FD C --> D. Наконец, поскольку {D}+ = {D}, допольнительные 
                    FD добавить уже нельзя, и рассмотрение единичных множеств атрибутов можно считать завершенным.
                </p>
                    Ввиду того, что {A}+ включает всче атрибуты S, обращаться к надмножества {A} нецелесообразно. Причина состоит в том, что какую бы FD мы не выявили 
                    (например, A C --> D), согласно частному случаю правила <i>расширения</i> FD она будет следовать их тех FD, которые найдены прежде при условии, что А
                    является единственным атрибтом левой части. Поэтому единственным множеством с двумя атрибутами, замыкание которого подлежит рассмотрению, является 
                    {C, D}: {C, D}+ = {C,D}. Это условие также не позволяет отыскать какие-либо новые FD. Итак, с замыканиями покончено, и набор найденных FD, справедливых для 
                    отношения S, таков: A --> C, A --> D и C --> D.
                <p>
                    Нетрудно заметить, что FD A --> D по правилу транзитивности может быть получена из двух других итоговых FD. Поэтому более простое эквивалетное множество FD,
                    удовлетворяющих отношению S, выглядит так: A --> C и C --> D.
                </p>
            </div>
        </div>


    </div>
</body>